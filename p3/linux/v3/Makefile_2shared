CC = gcc

CFLAGS= -Werror -Wall 

all: mem.o libhelper.so 
	$(CC) -shared -o libmem.so mem.o -lm -L. -lhelper

libhelper.so: helper.o
	$(CC) $(CFLAGS) -shared -o libhelper.so helper.o

helper.o: helper.c
	$(CC) $(CFLAGS) -c helper.c -fpic


#mem2.o: helper.o mem.o
#	$(CC) $(CFLAGS) -o mem2.o mem.c helper.c -lm

mem.o: mem.c
	$(CC) $(CFLAGS) -c mem.c -fpic

#helper.o: helper.c
#	$(CC) $(CFLAGS) -c helper.c

clean:
	rm -f *.o *.so
